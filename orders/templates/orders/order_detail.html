{% extends "base.html" %}
{% block title %}Order #{{ order.id }}{% endblock %}

{% block content %}
<h1 class="mb-2">Order #{{ order.id }}</h1>
<p class="text-muted mb-1">Status: <b>{{ order.get_status_display }}</b></p>
<p class="text-muted mb-3">Placed: {{ order.created_at }}</p>

<div class="card shadow-sm mb-3">
  <ul class="list-group list-group-flush">
    {% for item in order.items.all %}
      <li class="list-group-item d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-2">
        <div class="flex-grow-1">
          <div class="fw-bold">{{ item.product.name }}</div>
          <div class="text-muted small">Qty: {{ item.quantity }} @ ${{ item.price_at_purchase }}</div>
        </div>
        <div class="fw-bold flex-shrink-0">${{ item.line_total }}</div>
      </li>
    {% endfor %}
  </ul>
</div>

<div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-2 mb-3">
  <h4 class="m-0">Total: ${{ order.total }}</h4>
</div>

<a class="btn btn-outline-secondary mt-2" href="{% url 'my_orders' %}">Back to my orders</a>
{% endblock %}

